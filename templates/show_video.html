<!DOCTYPE html>
<html id="preview-page" lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename='images/title_logo.png') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <link href="{{ url_for('static', filename='css/navigation.css') }}" rel='stylesheet'>
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel='stylesheet'>
    <script src="https://kit.fontawesome.com/c622614d7c.js" crossorigin="anonymous"></script>
    <title>Video | KnowledgeTester</title>
</head>


<body id="preview-body">
    <div class="sidebar">
        <div class="logo-details">
            <img id="logo" width="200px" alt="logo" src="{{ url_for('static', filename='images/logo_text.png') }}">
            <i class='bx bx-menu' id="btn"></i>
        </div>
        <ul class="nav-list">
            <li>
                <a href="/">
                    <i class='bx bx-home'></i>
                    <span class="links_name">Home</span>
                </a>
                <span class="tooltip">Home</span>
            </li>
            <li>
                <a href="{{ url_for('search') }}">
                    <i class='bx bx-search-alt-2'></i>
                    <span class="links_name">Search</span>
                </a>
                <span class="tooltip">Search</span>
            </li>
            <li>
                <a href="{{ url_for('contact_us') }}">
                    <i class='bx bx-mail-send'></i>
                    <span class="links_name">Contact Us</span>
                </a>
                <span class="tooltip">Contact Us</span>
            </li>
            <li>
                <a href="{{ url_for('about_us') }}">
                    <i class='bx bx-info-circle'></i>
                    <span class="links_name">About Us</span>
                </a>
                <span class="tooltip">About Us</span>
            </li>
            {% if current_user.is_authenticated %}
            <li>
                <a id="show" style="cursor: pointer;">
                    <i class='bx bx-task'></i>
                    <span class="links_name">TODO</span>
                </a>
                <span class="tooltip">TODO</span>
            </li>
            <li>
                <a href="{{ url_for('profile', unique_id=unique_id) }}">
                    <i class='bx bx-user'></i>
                    <span class="links_name">Profile</span>
                </a>
                <span class="tooltip">Profile</span>
            </li>
            <li>
                <a href="{{ url_for('logout') }}">
                    <i class='bx bxs-user-minus'></i>
                    <span class="links_name">Logout</span>
                </a>
                <span class="tooltip">Logout</span>
            </li>
            {% else %}
            <li>
                <a href="{{ url_for('login') }}">
                    <i class='bx bx-user'></i>
                    <span class="links_name">Login</span>
                </a>
                <span class="tooltip">Login</span>
            </li>
            <li>
                <a href="{{ url_for('signup') }}">
                    <i class='bx bxs-user-plus'></i>
                    <span class="links_name">Sign Up</span>
                </a>
                <span class="tooltip">Sign Up</span>
            </li>
            {% endif %}
            <li class="profile">
                <div style="text-align: center;">
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-facebook"></i>
                </div>
            </li>
        </ul>
    </div>

    <section class="home-section mt-5 d-flex flex-column min-vh-100">
        <div id="toogle" class="container row mb-5" style="margin: auto; display: none;">
            <div class="col-md-0 col-lg-4">
                <h1 class="mt-4">Add videos to your TODO list</h1>
                <img class="mt-5" width="100%" src="{{ url_for('static', filename='images/arrow.svg') }}" alt="img">
            </div>
            <div class="col-md-12 col-lg-4 tasks mt-3">
                <div id='tasks-container'></div>
            </div>
            <div class="col-md-0 col-lg-4">
                <h1 class="mt-4">And then watch them later</h1>
                <img class="mt-5" width="100%" src="{{ url_for('static', filename='images/video.svg') }}" alt="img">
            </div>
        </div>
        <div class="container d-flex h-100" id="loading">
            <div class="row align-self-center w-100">
                <div class="col pl-5 pl-lg-5 text-center">
                    <img src="{{ url_for('static', filename='images/loading.gif') }}" alt="loading" />
                </div>
            </div>
        </div>
        <div id="content">
            <div class="container mb-5">
                <iframe style="width: 100%; height: 600px;" src="https://www.youtube.com/embed/{{ video_id }}?autoplay=1"></iframe>
                <p class="mt-3" style="font-weight: 400; font-size: 30px; margin-bottom: 5px !important;">
                    {{ title }}
                </p>
                <p style="font-weight: 700; font-size: 15px; color: #6f6464;">
                    By: {{ channel_name }}
                </p>
                <hr>
                <div class="text-center">
                    <button type="button" onclick="questions('{{ video_id }}')" class="btn btn-lg btn-success">Generate
                        Questions</button>
                </div>
            </div>
            
            <footer class="text-center text-white mt-auto" style="background-color: #ECECEC;">
                <div class="container pt-2">
                    <section class="mb-2">
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-google"></i></a>
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-instagram"></i></a>
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-linkedin"></i></a>
                        <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button"
                            data-mdb-ripple-color="dark"><i class="fab fa-github"></i></a>
                    </section>
                </div>
                <div class="text-center text-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                    Â© 2021 Copyright. Aditya Naitan
                </div>
            </footer>
        </div>
        
    </section>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous">
        </script>
    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
    <script src="https://localhost:44323/javascript/weavy.js"></script>
    <script>
        $(document).ready(function () {
            var sub = "{{ token }}";
            var weavy = new Weavy({ jwt: sub });
            weavy.space({ key: "{{ space_name }}" }).app({ key: "tasks-management", type: "tasks", container: "#tasks-container" });
            $('#show').click(function () {
                $('#toogle').toggle("slide");
            });
        });
    </script>
    <script type="text/javascript">
        function questions(video_id) {
            const body = document.getElementById("preview-body");
            const html = document.getElementById("preview-page");
            body.style.height = '100%';
            body.style.background = null;
            body.style.backgroundColor = "#e4e9f7";
            html.style.height = "100%";
            document.getElementById("loading").setAttribute('style', 'display:flex !important');
            document.getElementById("content").remove();
            var url = '/generate_questions/' + video_id
            $.getJSON(url, function (data) {
                window.location = "http://127.0.0.1:5000/questions/" + video_id;
            });
            return false;
        }
    </script>
</body>

</html>